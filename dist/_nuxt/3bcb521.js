(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{365:function(t,e,n){var content=n(376);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(35).default)("2c63ac2e",content,!0,{sourceMap:!1})},375:function(t,e,n){"use strict";n(365)},376:function(t,e,n){var r=n(34)(!1);r.push([t.i,".display-contents[data-v-7feca4d2]{display:inline-block}.display-contents[data-v-7feca4d2] ul{margin-bottom:0}.grid-container[data-v-7feca4d2]{padding:5px;display:grid;grid-template-columns:auto auto auto}.grid-item[data-v-7feca4d2]{padding:5px}.grid-item[data-v-7feca4d2]:nth-child(odd){background-color:#eceaea}.grid-item[data-v-7feca4d2]:nth-child(2n){background-color:#fff}",""]),t.exports=r},394:function(t,e,n){"use strict";n.r(e);var r=n(9),o=(n(31),n(1),n(76),n(15),n(91),n(111),n(2),n(17),n(60)),c=function(t,e,n){if(!e.hasOwnProperty(n)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r)}},d={components:{VRuntimeTemplate:{props:{template:String,parent:Object,templateProps:{type:Object,default:function(){return{}}}},render:function(t){if(this.template){var e=this.parent||this.$parent,n=e.$data;void 0===n&&(n={});var r=e.$props;void 0===r&&(r={});var a=e.$options;void 0===a&&(a={});var p=a.components;void 0===p&&(p={});var o=a.computed;void 0===o&&(o={});var i=a.methods;void 0===i&&(i={});var s=this.$data;void 0===s&&(s={});var d=this.$props;void 0===d&&(d={});var l=this.$options;void 0===l&&(l={});var m=l.methods;void 0===m&&(m={});var f=l.computed;void 0===f&&(f={});var u=l.components;void 0===u&&(u={});var v={$data:{},$props:{},$options:{},components:{},computed:{},methods:{}};Object.keys(n).forEach((function(t){void 0===s[t]&&(v.$data[t]=n[t])})),Object.keys(r).forEach((function(t){void 0===d[t]&&(v.$props[t]=r[t])})),Object.keys(i).forEach((function(t){void 0===m[t]&&(v.methods[t]=i[t])})),Object.keys(o).forEach((function(t){void 0===f[t]&&(v.computed[t]=o[t])})),Object.keys(p).forEach((function(t){void 0===u[t]&&(v.components[t]=p[t])}));var h=Object.keys(v.methods||{}),_=Object.keys(v.$data||{}),b=Object.keys(v.$props||{}),x=Object.keys(this.templateProps),C=_.concat(b).concat(h).concat(x),S=(w=e,k={},h.forEach((function(t){return c(w,k,t)})),k),y=function(t){var e={};return t.forEach((function(t){t&&Object.getOwnPropertyNames(t).forEach((function(n){return c(t,e,n)}))})),e}([v.$data,v.$props,S,this.templateProps]);return t({template:this.template||"<div></div>",props:C,computed:v.computed,components:v.components,provide:this.$parent._provided},{props:y})}var w,k}}},mixins:[o.a],data:function(){var t={asc:!0,sortParam:"",header:[],averageButton:0,currentPage:1,limit:20};t.header.push({orignial:"Building",name:"Building",param:"building"}),t.header.push({orignial:"Unit",name:"Unit",param:"unit"}),t.header.push({orignial:"Room",name:"Room",param:"room"}),t.header.push({orignial:"Temp",name:"Temp",param:"temp"}),t.header.push({orignial:"Setpoint",name:"Setpoint",param:"setpoint"}),t.header.push({orignial:"Humidity",name:"Humidity",param:"humidity"}),t.header.push({orignial:"Delta T",name:"Delta T",param:"deltaT"}),t.header.push({orignial:"Fan Usage",name:"Fan Usage",param:"fanOnPercent"}),t.header.push({orignial:"Temp 7D",name:"Temp",param:"temp7d"}),t.header.push({orignial:"Setpoint 7D",name:"Setpoint",param:"setpoint7d"}),t.header.push({orignial:"Humidity 7D",name:"Humidity",param:"humidity7d"}),t.header.push({orignial:"Delta T 7D",name:"Delta T",param:"deltaT7d"}),t.header.push({orignial:"Fan Usage 7D",name:"Fan Usage",param:"fanOnPercent7d"}),t.header.push({orignial:"Temp 30D",name:"Temp",param:"temp30d"}),t.header.push({orignial:"Setpoint 30D",name:"Setpoint",param:"setpoint30d"}),t.header.push({orignial:"Humidity 30D",name:"Humidity",param:"humidity30d"}),t.header.push({orignial:"Delta T 30D",name:"Delta T",param:"deltaT30d"}),t.header.push({orignial:"Fan Usage 30D",name:"Fan Usage",param:"fanOnPercent30d"}),t.header.push({orignial:"Occupied",name:"Occupied",param:"occupied"}),t.header.push({orignial:"Last Active",name:"Last Active",param:"timestamp"});var e=[];e.push({text:"View All",value:-1}),e.push({text:"High Energy Units",value:0}),e.push({text:"Setpoint Problems",value:1}),e.push({text:"Space Heater",value:2}),e.push({text:"Active Unoccupied Units",value:3});var n=[];n.push({text:"Current",value:0}),n.push({text:"7 Day Averages",value:7}),n.push({text:"30 Day Averages",value:30});var r=[];return r.push({value:" ",text:"North Facing"}),r.push({value:"0",text:"Pool Side"}),r.push({value:"1",text:"Studio"}),r.push({value:"2",text:"1 Bed"}),r.push({value:"3",text:"2 bed"}),r.push({value:"4",text:"1000"}),r.push({value:"5",text:"1001"}),r.push({value:"6",text:"1002"}),r.push({value:"7",text:"1003"}),r.push({value:"8",text:"1004"}),r.push({value:"9",text:"1005"}),r.push({value:"10",text:"1006"}),r.push({value:"11",text:"1007"}),{allTstats:[],currentAllow:["building","unit","room","occupied","temp","setpoint","humidity","deltaT","fanOnPercent","timestamp"],days7Allow:["building","unit","room","occupied","temp7d","setpoint7d","humidity7d","deltaT7d","fanOnPercent7d","timestamp"],days30Allow:["building","unit","room","occupied","temp30d","setpoint30d","humidity30d","deltaT30d","fanOnPercent30d","timestamp"],apartmentViews:e,averageButtons:n,aConfig:t,selectedApartmentView:-1,messageTags:r,setting:{}}},asyncData:function(t){return{}},computed:{filterHeaders:{get:function(){var t=this;return this.aConfig.header.filter((function(e){var param=e.param;switch(t.aConfig.averageButton){case 0:return t.currentAllow.findIndex((function(t){return t===param}))>=0;case 7:return t.days7Allow.findIndex((function(t){return t===param}))>=0;case 30:return t.days30Allow.findIndex((function(t){return t===param}))>=0}return!0}))},set:function(){}},filterTStats:{get:function(){var t=this;return this.allTstats.filter((function(e){switch(t.selectedApartmentView){case-1:return!0;case 0:switch(t.aConfig.averageButton){case 0:return e.fanOnPercent>80;case 7:return e.fanOnPercent7d>80;case 30:return e.fanOnPercent30d>80}case 1:switch(t.aConfig.averageButton){case 0:return Math.abs(e.deltaT)>5;case 7:return Math.abs(e.deltaT7d)>5;case 30:return Math.abs(e.deltaT30d)>5}case 2:switch(t.aConfig.averageButton){case 0:return e.temp-e.setpoint>4;case 7:return e.temp7d-e.setpoint7d>4;case 30:return e.temp30d-e.setpoint30d>4}case 3:return"101"===e.unit}return!1})).sort((function(a,b){return(a[t.aConfig.sortParam]-b[t.aConfig.sortParam])*(t.aConfig.asc?1:-1)}))},set:function(){}},pagingTStat:function(){var t=(this.aConfig.currentPage-1)*this.aConfig.limit;return this.filterTStats.slice(t,t+this.aConfig.limit)},getSelectedView:function(){var t=this;return this.apartmentViews.find((function(e){return e.value===t.selectedApartmentView}))}},watch:{"aConfig.averageButton":function(){this.orderBy()},selectedApartmentView:function(){this.orderBy()}},mounted:function(){this.getTstat()},methods:{orderBy:function(){switch(this.aConfig.averageButton){case 0:switch(this.selectedApartmentView){case-1:this.aConfig.sortParam="";break;case 0:this.aConfig.sortParam="fanOnPercent";break;case 1:this.aConfig.sortParam="deltaT";break;case 2:this.aConfig.sortParam="temp";break;case 3:this.aConfig.sortParam="unit"}break;case 7:switch(this.selectedApartmentView){case-1:this.aConfig.sortParam="";break;case 0:this.aConfig.sortParam="fanOnPercent7d";break;case 1:this.aConfig.sortParam="deltaT7d";break;case 2:this.aConfig.sortParam="temp7d";break;case 3:this.aConfig.sortParam="unit"}break;case 30:switch(this.selectedApartmentView){case-1:this.aConfig.sortParam="";break;case 0:this.aConfig.sortParam="fanOnPercent30d";break;case 1:this.aConfig.sortParam="deltaT30d";break;case 2:this.aConfig.sortParam="temp30d";break;case 3:this.aConfig.sortParam="unit"}}},getCellValue:function(t,e){var param=e.param,n=this.$byString(t,param);if(null==n)return"<span>&nbsp;</span>";switch(param){case"temp":case"setpoint":case"humidity":case"deltaT":case"temp7d":case"setpoint7d":case"humidity7d":case"setpoint7d":case"temp30d":case"setpoint30d":case"humidity30d":case"setpoint30d":return"<span>".concat(n.toFixed(1),"°</span>");case"fanOnPercent":case"fanOnPercent7d":case"fanOnPercent30d":return"<span>".concat(n.toFixed(1),"%</span>");case"timestamp":return"<span>".concat(this.$timediff(this.$moment().format(),n),"</span>");case"occupied":return n?"<font-awesome-icon :icon=\"['fas', 'check']\" class=\"text-success\"/>":"<font-awesome-icon :icon=\"['fas', 'times']\" class=\"text-danger\"/>";default:return"<span>".concat(n,"</span>")}},setSort:function(t){var param=t.param;param===this.aConfig.sortParam&&(this.aConfig.asc=!this.aConfig.asc),this.aConfig.sortParam=param},getSort:function(t){return t.param===this.aConfig.sortParam?["fas",this.aConfig.asc?"caret-down":"caret-up"]:["fas","sort"]},getComponent:function(t,header){return this.getCellValue(t,header)},toggleTstat:function(t){this.$set(t,"expandRows",!t.expandRows)},getTstat:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,data,o,c,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$fetchTstat();case 3:n=e.sent,r=n.status,data=n.data,200===r&&t.$set(t,"allTstats",data),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),o=e.t0.message,c=e.t0.response,d=c?c.data:o,t.$toAst(t,d,"danger");case 15:case"end":return e.stop()}}),e,null,[[0,9]])})))()},onPostSubmit:function(t){return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault();case 1:case"end":return e.stop()}}),e)})))()},openTStat:function(t){var e=[];this.allTstats.filter((function(e){return e.building===t.building&&e.unit===t.unit})).forEach((function(t){var n=t._id;return e.push(n)})),this.$router.push({path:"/apartments/".concat(t.building),query:{rooms:e.join("&")}})}}},l=(n(375),n(14)),component=Object(l.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticClass:"mx-2 full-screen",attrs:{"no-body":""}},[n("b-container",{staticClass:"my-0 py-2 bg-default",attrs:{fluid:""}},[n("b-row",[n("b-col",{staticClass:"text-left"},[n("h1",{staticClass:"h2"},[n("span",{staticClass:"specialty"},[t._v("APARTMENTS")])])]),t._v(" "),n("b-col",{attrs:{cols:"12"}},[n("b-dropdown",{ref:"dropdown-apartmentView",staticClass:"mx-1",attrs:{size:"sm",id:"dropdown-apartmentView",text:t.getSelectedView.text}},[n("b-dropdown-form",t._l(t.apartmentViews,(function(e,r){return n("b-dropdown-item-button",{key:r,attrs:{size:"sm"},on:{click:function(n){t.selectedApartmentView=e.value}}},[t._v(t._s(e.text))])})),1)],1),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-message",modifiers:{"modal-message":!0}}],staticClass:"mx-1",attrs:{size:"sm",variant:"warning"}},[n("font-awesome-icon",{attrs:{icon:["fas","comment-dots"]}})],1),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-setting",modifiers:{"modal-setting":!0}}],staticClass:"mx-1",attrs:{size:"sm",variant:"info"}},[n("font-awesome-icon",{attrs:{icon:["fas","cog"]}})],1),t._v(" "),n("b-form-radio-group",{staticClass:"mx-1 my-1 my-md-0",attrs:{options:t.averageButtons,"aria-describedby":"averageButtons",name:"buttons-average",buttons:"","button-variant":"outline-primary",size:"sm"},model:{value:t.aConfig.averageButton,callback:function(e){t.$set(t.aConfig,"averageButton",e)},expression:"aConfig.averageButton"}}),t._v(" "),n("div",{staticClass:"display-contents"},[n("b-pagination",{attrs:{size:"sm","total-rows":t.filterTStats.length,"per-page":t.aConfig.limit},model:{value:t.aConfig.currentPage,callback:function(e){t.$set(t.aConfig,"currentPage",e)},expression:"aConfig.currentPage"}})],1)],1)],1)],1),t._v(" "),n("b-table-simple",{staticClass:"h-100 mb-0 d-inline-block sticky-table",attrs:{bordered:"",hover:"",small:"",responsive:"","sticky-header":""}},[n("b-thead",[n("b-tr",t._l(t.filterHeaders,(function(header){return n("b-th",{key:header.param,staticClass:"text-nowrap text-center click-able",on:{click:function(e){return t.setSort(header)}}},[t._v(t._s(header.name)),n("font-awesome-icon",{staticClass:"ml-2",attrs:{icon:t.getSort(header)}})],1)})),1)],1),t._v(" "),n("b-tbody",[t._l(t.pagingTStat,(function(e,r){return[n("b-tr",{key:r,staticClass:"click-able",on:{click:function(n){return t.toggleTstat(e)},dblclick:function(n){return t.openTStat(e)}}},t._l(t.filterHeaders,(function(header){return n("b-td",{key:header.param,staticClass:"text-nowrap text-center"},[n("v-runtime-template",{attrs:{template:t.getComponent(e,header)}})],1)})),1),t._v(" "),e.expandRows?n("b-tr",{key:"table"+r},[n("b-td",{staticClass:"text-nowrap text-center",attrs:{colspan:"50"}},[n("div",{staticClass:"grid-container"},t._l(t.aConfig.header,(function(header){return n("div",{key:header.param,staticClass:"grid-item",attrs:{cols:"4"}},[n("span",{staticClass:"float-left font-weight-bold"},[t._v(t._s(header.orignial))]),t._v(" "),n("span",{staticClass:"float-right"},[n("v-runtime-template",{attrs:{template:t.getComponent(e,header)}})],1)])})),0)])],1):t._e()]})),t._v(" "),n("b-tr")],2)],1)],1),t._v(" "),n("b-modal",{ref:"modal-message",attrs:{id:"modal-message",size:"lg",title:"Thermostat Messages","hide-footer":""}},[n("b-row",[n("b-col",[n("b-overlay",{attrs:{rounded:"md"}},[n("b-table-simple",{attrs:{bordered:"",hover:"",small:"",responsive:"","sticky-header":""}},[n("b-thead",{attrs:{"head-variant":"dark"}},[n("b-tr",[n("b-th",[t._v("Message")]),t._v(" "),n("b-th",[t._v("Status")]),t._v(" "),n("b-th",[t._v("Date Sent")]),t._v(" "),n("b-th",[t._v(" ")])],1)],1),t._v(" "),n("b-tbody",[n("b-tr",[n("b-td",[t._v("Parking lot repaire on Tuesday")]),t._v(" "),n("b-td",[t._v("Active")]),t._v(" "),n("b-td",[t._v("02/16/21")]),t._v(" "),n("b-td",[n("b-button",{staticClass:"crud-action",attrs:{size:"sm",variant:"outline-danger"}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)],1)],1),t._v(" "),n("b-tr",[n("b-td",[t._v("New Washer installed")]),t._v(" "),n("b-td",[t._v("Dismissed")]),t._v(" "),n("b-td",[t._v("01/23/21")]),t._v(" "),n("b-td",[n("b-button",{staticClass:"crud-action",attrs:{size:"sm",variant:"outline-danger"}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)],1)],1),t._v(" "),n("b-tr",[n("b-td"),t._v(" "),n("b-td"),t._v(" "),n("b-td"),t._v(" "),n("b-td",[n("b-button",{staticClass:"crud-action",attrs:{size:"sm",variant:"outline-danger"}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)],1)],1),t._v(" "),n("b-tr",[n("b-td"),t._v(" "),n("b-td"),t._v(" "),n("b-td"),t._v(" "),n("b-td",[n("b-button",{staticClass:"crud-action",attrs:{size:"sm",variant:"outline-danger"}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)],1)],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{staticClass:"text-right"},[n("b-button",{attrs:{type:"button",size:"sm",variant:"danger"}},[t._v("Cancel")]),t._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-new-message",modifiers:{"modal-new-message":!0}}],attrs:{type:"submit",size:"sm",variant:"primary"}},[t._v("New Message")])],1)],1)],1)],1)],1)],1),t._v(" "),n("b-modal",{ref:"modal-new-message",attrs:{id:"modal-new-message",size:"md",title:"New Messages","hide-footer":""}},[n("b-row",[n("b-col",[n("b-overlay",{attrs:{rounded:"md"}},[n("b-form",{on:{submit:t.onPostSubmit}},[n("b-form-group",{attrs:{id:"input-message-group",label:"Message:","label-for":"input-message"}},[n("b-form-textarea",{attrs:{id:"input-message",placeholder:"Enter Message",required:""}})],1),t._v(" "),n("b-form-group",{attrs:{label:"Tags:"}},[n("b-form-checkbox-group",{attrs:{options:t.messageTags,name:"flavour-1"}})],1),t._v(" "),n("b-row",[n("b-col",{staticClass:"text-right"},[n("b-button",{attrs:{type:"button",size:"sm",variant:"danger"}},[t._v("Cancel")]),t._v(" "),n("b-button",{attrs:{type:"submit",size:"sm",variant:"primary"}},[t._v("Post")])],1)],1)],1)],1)],1)],1)],1),t._v(" "),n("b-modal",{ref:"modal-setting",attrs:{id:"modal-setting",size:"md",title:"Setting","hide-footer":""}},[n("b-row",[n("b-col",[n("b-overlay",{attrs:{rounded:"md"}},[n("div",[n("label",{attrs:{for:"fcHSMin"}},[t._v("Heating Setpoint Minimum - "+t._s(t.setting.fcHSMin))]),t._v(" "),n("b-form-input",{attrs:{id:"fcHSMin",type:"range",min:"55",max:"99"},model:{value:t.setting.fcHSMin,callback:function(e){t.$set(t.setting,"fcHSMin",e)},expression:"setting.fcHSMin"}})],1),t._v(" "),n("div",[n("label",{attrs:{for:"fcHSMax"}},[t._v("Heating Setpoint Maximum - "+t._s(t.setting.fcHSMax))]),t._v(" "),n("b-form-input",{attrs:{id:"fcHSMax",type:"range",min:"55",max:"99"},model:{value:t.setting.fcHSMax,callback:function(e){t.$set(t.setting,"fcHSMax",e)},expression:"setting.fcHSMax"}})],1),t._v(" "),n("div",[n("label",{attrs:{for:"fcCSMin"}},[t._v("Cooling Setpoint Minimum - "+t._s(t.setting.fcCSMin))]),t._v(" "),n("b-form-input",{attrs:{id:"fcCSMin",type:"range",min:"55",max:"99"},model:{value:t.setting.fcCSMin,callback:function(e){t.$set(t.setting,"fcCSMin",e)},expression:"setting.fcCSMin"}})],1),t._v(" "),n("div",[n("label",{attrs:{for:"fcCSMax"}},[t._v("Cooling Setpoint Maximum - "+t._s(t.setting.fcCSMax))]),t._v(" "),n("b-form-input",{attrs:{id:"fcCSMax",type:"range",min:"55",max:"99"},model:{value:t.setting.fcCSMax,callback:function(e){t.$set(t.setting,"fcCSMax",e)},expression:"setting.fcCSMax"}})],1),t._v(" "),n("hr"),t._v(" "),n("div",[n("label",{attrs:{for:"fcSMinHS"}},[t._v("Safety Minimum Heating Setpoint - "+t._s(t.setting.fcSMinHS))]),t._v(" "),n("b-form-input",{attrs:{id:"fcSMinHS",type:"range",min:"40",max:"99"},model:{value:t.setting.fcSMinHS,callback:function(e){t.$set(t.setting,"fcSMinHS",e)},expression:"setting.fcSMinHS"}})],1),t._v(" "),n("div",[n("label",{attrs:{for:"fcSMaxCS"}},[t._v("Safety Maximum Cooling Setpoint - "+t._s(t.setting.fcSMaxCS))]),t._v(" "),n("b-form-input",{attrs:{id:"fcSMaxCS",type:"range",min:"55",max:"99"},model:{value:t.setting.fcSMaxCS,callback:function(e){t.$set(t.setting,"fcSMaxCS",e)},expression:"setting.fcSMaxCS"}})],1),t._v(" "),n("hr"),t._v(" "),n("div",[n("label",{attrs:{for:"fcFOBL"}},[t._v("Full on back light - "+t._s(t.setting.fcFOBL)+"%")]),t._v(" "),n("b-form-input",{attrs:{id:"fcFOBL",type:"range",min:"0",max:"100"},model:{value:t.setting.fcFOBL,callback:function(e){t.$set(t.setting,"fcFOBL",e)},expression:"setting.fcFOBL"}})],1),t._v(" "),n("div",[n("label",{attrs:{for:"fcSMBL"}},[t._v("Sleep mode back light - "+t._s(t.setting.fcSMBL)+"%")]),t._v(" "),n("b-form-input",{attrs:{id:"fcSMBL",type:"range",min:"0",max:"100"},model:{value:t.setting.fcSMBL,callback:function(e){t.$set(t.setting,"fcSMBL",e)},expression:"setting.fcSMBL"}})],1)])],1)],1),t._v(" "),n("b-row",[n("b-col",{staticClass:"text-right"},[n("b-button",{attrs:{type:"button",size:"sm",variant:"danger"}},[t._v("Cancel")]),t._v(" "),n("b-button",{attrs:{type:"submit",size:"sm",variant:"primary"}},[t._v("Apply")])],1)],1)],1)],1)}),[],!1,null,"7feca4d2",null);e.default=component.exports}}]);