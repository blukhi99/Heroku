(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{363:function(e,t,n){"use strict";var r=n(9);n(31),n(42),n(91),n(111),n(16);t.a={data:function(){return{endPointsCV:[],intervalCV:null}},mounted:function(){var e=this;this.getCurrentValues(),this.intervalCV=setInterval((function(){e.getCurrentValues()}),3e4)},beforeDestroy:function(){this.intervalCV&&clearInterval(this.intervalCV)},methods:{getEndpointValue:function(e,t){var n=e._id,r=e.precision,o=e.units,l=e.type,c=this.endPointsCV.find((function(e){return e._id===n}));if(null!=c){if(t)return c.value;var d="";switch(l){case"number":var m=c.value?c.value.toFixed(r||0):c.value;null!=m&&(d=m+(o||""));break;case"boolean":d=c.value?"On":"Off";break;case"enum":var f=e.enum.find((function(e){return e.value===c.value}));d=f?f.name:c.value}return d+""}},getEndpointStatus:function(e){var t=this.endPointsCV.find((function(t){return t.name===e.name}));if(null!=t)return t.status},getEndpointStyle:function(e){var t=this.endPointsCV.find((function(t){return t&&e&&t.name===e.name}));if(null!=t)switch(t.status){case"good":return{"background-color":"unset",color:"black"};case"stale":return{"background-color":"lightgrey",color:"black"};case"override":return{"background-color":"rgb(216, 138, 255)",color:"black"};case"down":return{"background-color":"yellow",color:"black"};case"alarm":return{"background-color":"red",color:"white"};case"updating":return{"background-color":"DarkCyan",color:"white"};default:return{"background-color":"unset",color:"gray"}}},getCurrentValues:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$getCurrentValues(e.currentSite);case 3:n=t.sent,r=n.status,data=n.data,200===r&&(e.endPointsCV=data),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()}}}},372:function(e,t,n){var content=n(393);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(35).default)("dc844e8a",content,!0,{sourceMap:!1})},392:function(e,t,n){"use strict";n(372)},393:function(e,t,n){var r=n(34)(!1);r.push([e.i,".element[data-v-2486f43a]{position:absolute;-webkit-user-select:none;-moz-user-select:none;-o-user-select:none;-ms-user-select:none;user-select:none}.sub-element[data-v-2486f43a]{cursor:move}.sub-click-element[data-v-2486f43a],.sub-element[data-v-2486f43a]{transition:margin .25s ease-out}img.sub-click-element[data-v-2486f43a],img.sub-element[data-v-2486f43a]{-o-object-fit:contain;object-fit:contain}.sub-click-element-cursor[data-v-2486f43a]{cursor:pointer}#panel-bg[data-v-2486f43a]{background-color:#f0f0f0;background-size:2px 2px;background-position:0 0,1px 1px;background-image:linear-gradient(45deg,#969696 25%,transparent 0,transparent 75%,#969696 0,#969696),linear-gradient(45deg,#969696 25%,transparent 0,transparent 75%,#969696 0,#969696);-pie-background:linear-gradient(45deg,#969696 25%,transparent 0,transparent 75%,#969696 0,#969696) 0 0/60px,linear-gradient(45deg,#969696 25%,transparent 0,transparent 75%,#969696 0,#969696) 30px 30px/60px,#eee;behavior:url(/pie/PIE.htc)}#panel[data-v-2486f43a]{background:#d3d3d3}.img-overlay[data-v-2486f43a]{background-color:transparent;background-size:5px 5px,5px 5px;background-position:-1px -1px,-1px -1px;background-image:linear-gradient(rgba(0,0,0,.329) 1px,transparent 0),linear-gradient(90deg,rgba(0,0,0,.329) 1px,transparent 0),linear-gradient(hsla(0,0%,100%,.3) 1px,transparent 0),linear-gradient(90deg,hsla(0,0%,100%,.3) 1px,transparent 0);-pie-background:linear-gradient(rgba(0,0,0,.329) 1px,transparent 0) -1px -1px/100px,linear-gradient(90deg,rgba(0,0,0,.329) 1px,transparent 0) -1px -1px/100px,linear-gradient(hsla(0,0%,100%,.3) 1px,transparent 0) -1px -1px/5px,linear-gradient(90deg,hsla(0,0%,100%,.3) 1px,transparent 0) -1px -1px/5px,transparent;behavior:url(/pie/PIE.htc)}",""]),e.exports=r},413:function(e,t,n){"use strict";n.r(t);n(3),n(1),n(5),n(6);var r=n(9),o=n(0),l=(n(31),n(91),n(76),n(2),n(4),n(16),n(36),n(111),n(17),n(18),n(10),n(60)),c=n(363),d=n(25);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var h={mixins:[l.a,c.a],data:function(){return{quickStyle:[{text:"------",value:null,disabled:!0},{text:"BT",value:{dFontSize:.7,"font-weight":"normal"}},{text:"LL",value:{dFontSize:.5,"font-weight":"normal"}},{text:"ML",value:{dFontSize:.4,"font-weight":"normal"}},{text:"SL",value:{dFontSize:.3,"font-weight":"normal"}},{text:"LV",value:{dFontSize:.5,"font-weight":"bold"}},{text:"MV",value:{dFontSize:.4,"font-weight":"bold"}},{text:"SV",value:{dFontSize:.3,"font-weight":"bold"}}],screen:{},endPointsData:[],hvacData:[],mainWidth:0,mainHeight:0,panzoomInstance:null,drag:{onDragStart:this.onDragStart,onDragEnd:this.onDragEnd},file:{setAction:this.setCase},fileDefault:{setAction:this.setDefaultMethod},fileBackground:{setAction:this.setBackgroundMethod},selectedElement:null,modalItem:{},endPointEditItem:{},canEdit:!1,canZoom:!0}},asyncData:function(e){e.route;return{screenId:e.params.id}},computed:{selectedStyle:{get:function(){var e=this,t={};return this.selectedElement&&this.selectedElement.style&&(t={dFontSize:this.selectedElement.style.dFontSize,"font-weight":this.selectedElement.style["font-weight"]}),this.quickStyle.some((function(n){return e.$isEqualsJson(t,n.value||{})}))?t:null},set:function(e){e&&this.selectedElement&&(this.selectedElement.style||this.$set(this.selectedElement,"style",{dFontSize:1,"font-style":"unset"}),this.$set(this.selectedElement.style,"dFontSize",e.dFontSize),this.$set(this.selectedElement.style,"font-weight",e["font-weight"]))}},backgroundStyle:function(){return{width:"".concat(this.mainWidth,"px"),height:"".concat(this.mainHeight,"px")}},selectedElementPositionWH:{get:function(){return this.selectedElement.position.w},set:function(e){this.selectedElement.position.w=e,this.selectedElement.position.h=e}},selectedEndPoint:function(){var e=this;return this.endPointsData.find((function(t){return t._id===e.modalItem.endPointId}))},alreadyAttach:function(){var e=this;return this.modalItem&&this.screen&&this.screen.elements&&this.screen.elements.findIndex((function(t){return t._id===e.modalItem._id}))>-1},divPanelIdStyle:function(){return this.canEdit?"overflow : auto;":"overflow : hidden;"}},mounted:function(){this.getSingleScreen(),this.getAllEndPoints(),this.getHvac()},watch:{screenId:function(){this.getSingleScreen()},screen:{deep:!0,immediate:!0,handler:function(){this.backgroundSize()}},canEdit:function(e){var t=this;this.canZoom=!e,e&&this.resetScale(),this.$nextTick((function(){return t.backgroundSize()}))},canZoom:function(e){this.panzoomInstance&&(e?this.panzoomInstance.resume():this.panzoomInstance.pause())}},created:function(){},destroyed:function(){},methods:f(f({},Object(d.c)("sidebar",["addScreen","deleteScreen"])),{},{onResize:function(element){this.backgroundSize()},getEndPointName:function(e){return(this.endPointsData.find((function(t){return t._id===e}))||{}).displayName},getSingleScreen:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$getSingleScreen({_id:e.screenId});case 3:n=t.sent,r=n.status,data=n.data,200===r&&(e.screen=data),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getAllEndPoints:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$getEndPoints(e.currentSite);case 3:n=t.sent,r=n.status,data=n.data,200===r&&(e.endPointsData=data),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getHvac:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,data;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$getHvac();case 3:n=t.sent,r=n.status,data=n.data,200===r&&(e.hvacData=[],e.hvacData.push({key:"None",cardTitle:"None"}),Object.keys(data).forEach((function(t){data[t]instanceof Array&&data[t].forEach((function(n,r){var o=n;o.key=n.title+(n.name?"/"+n.name:""),o.cardTitle=t,e.hvacData.push(o)}))}))),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])})))()},panelStyle:function(e,t){if(null==e)return{width:"0%",height:"0%"};var n=this.backgroundStyle;t&&(n={});var r=this.mainWidth/609*25;return n["font-size"]=r+"px",n},backgroundSize:function(){var e=this.screen.size;if(null==e)return this.mainWidth=0,void(this.mainHeight=0);var t=e.w,n=e.h,r=this.$refs.panel.clientWidth/t,o=this.$refs.panel.clientHeight/n,l=this.canEdit?1:Math.min(r,o);this.mainWidth=l*t,this.mainHeight=l*n},getElementValue:function(e){if(!e.endPointId)return e.default||"□";var t;try{var n=this.endPointsData.find((function(t){return t._id===e.endPointId})),r=this.getEndpointValue(n);switch(e.type){case"text":t=r&&r.trim()?r:e.default;break;case"image":var img="";if("enum"===n.type)try{img=e.case.find((function(e){return e.content===r})).value}catch(e){}"boolean"===n.type&&(img=r?e.t:e.f),t=img&&img.trim()?img:e.default}}catch(e){}return t||(t=e.default),t||"□"},coordinate:function(e){var t=e.position;null==t&&(t={x:0,y:0});var n=void 0===t.x?0:t.x,r=void 0===t.y?0:t.y,o=void 0===t.w?0:t.w,l=void 0===t.h?0:t.h,style={left:(n=n/this.screen.size.w.toFixed(2)*this.mainWidth)+"px",top:(r=r/this.screen.size.h.toFixed(2)*this.mainHeight)+"px"};return"image"===e.type&&(o>0&&(o=o/this.screen.size.w.toFixed(2)*this.mainWidth,style.width=o+"px"),l>0&&(l=l/this.screen.size.h.toFixed(2)*this.mainHeight,style.height=l+"px")),this.canEdit?style.border=this.isSelected(e)?"1px solid #dc3545":"1px solid gray":style.border="1px solid transparent",style},elementStyle:function(e){var style=e.style,t=e.endPointId;if(void 0===style)return{};var n=style;if(n["font-size"]=n.dFontSize+"em",t)try{var r=this.endPointsData.find((function(e){return e._id===t})),o=this.getEndpointStyle(r);o&&Object.keys(o).forEach((function(e){n[e]=o[e]})),r.writable&&(n.color="royalblue")}catch(e){}return n},getTextStyle:function(e){return f(f({},this.coordinate(e)),this.elementStyle(e))},onInit:function(e,t){this.panzoomInstance=e},resetScale:function(){this.panzoomInstance&&(this.panzoomInstance.pause(),this.panzoomInstance.zoomAbs(0,0,1),this.panzoomInstance.smoothMoveTo(0,0),this.canZoom&&this.panzoomInstance.resume())},setSelectedElement:function(e){this.selectedElement=this.screen.elements.find((function(t){return t._id===e._id}))},onDragStart:function(e){this.setSelectedElement(e)},onDragEnd:function(e,t,n){if(null!==e&&null!==t){var r=e/this.mainWidth*this.screen.size.w,o=t/this.mainHeight*this.screen.size.h;this.$set(n.position,"x",Math.round(r)),this.$set(n.position,"y",Math.round(o))}},isSelected:function(e){return this.selectedElement&&this.selectedElement._id===e._id},removeBgColor:function(){this.$set(this.selectedElement.style,"background-color","unset")},onSelect:function(){this.$refs.endpointGroup.onSelect(),this.$refs["modal-end-point-group"].hide()},onCancelGroupModal:function(){this.$refs["modal-end-point-group"].hide()},showModalElement:function(){this.$refs["modal-element"].show()},hideModalElement:function(){this.$refs["modal-element"].hide()},addNewItem:function(){this.modalItem={type:"text",_id:Date.now(),card:"None"},this.modalItem.case||this.$set(this.modalItem,"case",[]),this.showModalElement()},editItem:function(){this.modalItem=this.$deepClone(this.selectedElement),void 0===this.modalItem.case&&this.$set(this.modalItem,"case",[]),void 0===this.modalItem.card&&this.$set(this.modalItem,"card","None"),this.showModalElement()},onSaveElement:function(){var e=this;this.screen.elements||this.$set(screen,"elements",[]);var t=this.screen.elements.findIndex((function(t){return t._id===e.modalItem._id}));t>-1?this.$set(this.screen.elements,t,this.$deepClone(this.modalItem)):(this.$set(this.modalItem,"position",{w:50,h:50,x:0,y:0}),this.$set(this.modalItem,"style",{color:"unset",dFontSize:.3,"font-size":"0.3em","font-weight":"normal","font-style":"normal"}),this.screen.elements.push(this.$deepClone(this.modalItem))),this.setSelectedElement(this.modalItem),this.hideModalElement()},setCase:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o,l,c,data,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.file,r.prev=1,r.next=4,n.$uploadFile(o);case 4:l=r.sent,c=l.status,data=l.data,200===c&&((d=n.modalItem.case.findIndex((function(e){return e.content===t.name})))>-1?n.$set(n.modalItem.case,d,{content:t.name,value:data.url}):n.modalItem.case.push({content:t.name,value:data.url})),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(1),console.error(r.t0);case 13:case"end":return r.stop()}}),r,null,[[1,10]])})))()},setDefaultMethod:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,l,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.file,n.prev=1,n.next=4,t.$uploadFile(r);case 4:o=n.sent,l=o.status,data=o.data,200===l&&t.$set(t.modalItem,"default",data.url),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.error(n.t0);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))()},setBackgroundMethod:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,l,c,d,data;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.file,o=e.width,l=e.height,n.prev=1,n.next=4,t.$uploadFile(r);case 4:c=n.sent,d=c.status,data=c.data,200===d&&(t.screen.size||t.$set(t.screen,"size",{w:0,h:0}),t.$set(t.screen,"url",data.url),t.$set(t.screen.size,"w",o),t.$set(t.screen.size,"h",l)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(1),console.error(n.t0);case 13:case"end":return n.stop()}}),n,null,[[1,10]])})))()},removeDefault:function(){this.$set(this.modalItem,"default","")},removeCase:function(e){var t=this.modalItem.case.findIndex((function(t){return t.content===e.name}));this.$delete(this.modalItem.case,t)},getCaseValue:function(e){return(this.modalItem.case.find((function(t){return t.content===e}))||{}).value},copyElement:function(){var element=this.$deepClone(this.modalItem);this.$set(element,"_id",Date.now()),this.screen.elements.push(element),this.setSelectedElement(element),this.hideModalElement()},deleteElement:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=e.screen.elements.findIndex((function(t){return t._id===e.modalItem._id})))>-1)){t.next=6;break}return t.next=4,e.$confirmDelete(e);case 4:t.sent&&(e.$delete(e.screen.elements,n),e.hideModalElement());case 6:case"end":return t.stop()}}),t)})))()},isClickAble:function(element){var e=this.endPointsData.find((function(e){return e._id===element.endPointId}));return e&&e._id||"None"!==element.card},hasChart:function(element){var e=this.endPointsData.find((function(e){return e._id===element.endPointId}));return e&&e._id},hasEdit:function(element){var e=this.endPointsData.find((function(e){return e._id===element.endPointId}));return e&&e.writable&&this.currentSitePermissions.hvacManagement},hasCard:function(element){return"None"!==element.card},openChart:function(element){var e=[element.endPointId],t=this.$router.resolve({path:"/chart-endpoint/",query:{path:e.join("&"),fullScreen:!0}});window.open(t.href,"","width=500")},openEdit:function(element){this.endPointEditItem=this.endPointsData.find((function(e){return e._id===element.endPointId}))||{},this.$refs["modal-endpoint-edit"].show()},openCard:function(element){},hideEndpointEdit:function(){this.$refs["modal-endpoint-edit"].hide()},updatedEndpoint:function(){this.getCurrentValues(),this.$refs["modal-endpoint-edit"].hide()},saveScreen:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$editScreen(e.screen);case 3:n=t.sent,r=n.status,n.data,200===r&&e.$toAst(e,"Save Successfully","success"),t.next=15;break;case 9:t.prev=9,t.t0=t.catch(0),o=t.t0.message,l=t.t0.response,c=l?l.data:o,e.$toAst(e,c,"danger");case 15:case"end":return t.stop()}}),t,null,[[0,9]])})))()},deleteThisScreen:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$confirmDelete(e);case 2:if(!t.sent){t.next=19;break}return t.prev=4,t.next=7,e.$deleteScreen(e.screen);case 7:n=t.sent,r=n.status,n.data,200===r&&(e.deleteScreen(e.screen),e.$toAst(e,"Deleted Successfully","success"),e.$router.replace({name:"index"})),t.next=19;break;case 13:t.prev=13,t.t0=t.catch(4),o=t.t0.message,l=t.t0.response,c=l?l.data:o,e.$toAst(e,c,"danger");case 19:case"end":return t.stop()}}),t,null,[[4,13]])})))()},submitScreen:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,o,data,l,c,d,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),n.prev=1,n.next=4,t.$addScreen(t.screen);case 4:r=n.sent,o=r.status,data=r.data,200===o?(t.$bvModal.hide("modal-duplicate-screen"),(l=f({},t.screen))._id=data._id,t.addScreen(l),t.$router.push({path:"/screen/".concat(data._id)})):console.error("Error Add Screen"),n.next=16;break;case 10:n.prev=10,n.t0=n.catch(1),c=n.t0.message,d=n.t0.response,m=d?d.data:c,t.$toAst(t,m,"danger");case 16:case"end":return n.stop()}}),n,null,[[1,10]])})))()},onArrowKeyPressed:function(e){var t=e.key;if(this.selectedElement)switch(t){case"ArrowUp":this.$set(this.selectedElement.position,"y",this.selectedElement.position.y-1);break;case"ArrowDown":this.$set(this.selectedElement.position,"y",this.selectedElement.position.y+1);break;case"ArrowRight":this.$set(this.selectedElement.position,"x",this.selectedElement.position.x+1);break;case"ArrowLeft":this.$set(this.selectedElement.position,"x",this.selectedElement.position.x-1)}}})},v=(n(392),n(14)),component=Object(v.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("b-card",{staticClass:"mx-2 full-screen",attrs:{"no-body":""}},[n("b-row",{staticClass:"mx-0"},[e._e(),e._v(" "),n("b-form-checkbox",{attrs:{variant:"outline-primary",switch:""},model:{value:e.canEdit,callback:function(t){e.canEdit=t},expression:"canEdit"}}),e._v(" "),e.canEdit?e._e():n("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:e.resetScale}},[e._v("Reset")]),e._v(" "),e.canEdit?n("b-button-group",{attrs:{size:"sm"}},[n("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:e.saveScreen}},[e._v("Save")]),e._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-duplicate-screen",modifiers:{"modal-duplicate-screen":!0}}],attrs:{size:"sm",variant:"outline-info"}},[e._v("Duplicate")]),e._v(" "),n("b-button",{attrs:{size:"sm",variant:"outline-danger"},on:{click:e.deleteThisScreen}},[e._v("Delete")])],1):e._e(),e._v(" "),e.canEdit?n("b-form-file",{directives:[{name:"file",rawName:"v-file",value:Object.assign({},e.fileBackground),expression:"{ ...fileBackground, }"}],staticClass:"auto-width",attrs:{size:"sm"}},[e._v("Background")]):e._e(),e._v(" "),e.canEdit?n("b-button-group",{staticClass:"mx-1",attrs:{size:"sm"}},[n("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:e.addNewItem}},[e._v("New")]),e._v(" "),e.selectedElement?n("b-button",{attrs:{size:"sm",variant:"outline-primary"},on:{click:e.editItem}},[e._v("Edit")]):e._e()],1):e._e(),e._v(" "),e.canEdit&&e.selectedElement&&"text"===e.selectedElement.type?n("b-form-select",{staticClass:"auto-width",attrs:{size:"sm",options:e.quickStyle},model:{value:e.selectedStyle,callback:function(t){e.selectedStyle=t},expression:"selectedStyle"}}):e._e(),e._v(" "),e.canEdit&&e.selectedElement&&"text"===e.selectedElement.type?n("div",{staticClass:"auto-width inline-flex"},[n("b-form-input",{staticClass:"auto-width",attrs:{size:"sm",type:"number",min:.1,max:4,step:"0.01"},model:{value:e.selectedElement.style.dFontSize,callback:function(t){e.$set(e.selectedElement.style,"dFontSize",e._n(t))},expression:"selectedElement.style.dFontSize"}}),e._v(" "),n("b-form-input",{staticClass:"auto-width",staticStyle:{width:"50px"},attrs:{size:"sm",id:"bg-color",type:"color"},model:{value:e.selectedElement.style["background-color"],callback:function(t){e.$set(e.selectedElement.style,"background-color",t)},expression:"selectedElement.style['background-color']"}}),e._v(" "),n("label",{staticClass:"ml-1 mr-1",attrs:{for:"bg-color"}},[e._v("Bg")]),e._v(" "),e.selectedElement.style["background-color"]&&"unset"!==e.selectedElement.style["background-color"]?n("b-button",{staticClass:"py-0 px-0 mr-3 text-danger",attrs:{size:"sm",variant:"link"},on:{click:e.removeBgColor}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1):e._e(),e._v(" "),n("b-form-input",{staticClass:"auto-width",staticStyle:{width:"50px"},attrs:{size:"sm",id:"text-color",type:"color"},model:{value:e.selectedElement.style.color,callback:function(t){e.$set(e.selectedElement.style,"color",t)},expression:"selectedElement.style.color"}}),e._v(" "),n("label",{staticClass:"ml-1 mr-3",attrs:{for:"text-color"}},[e._v("T")]),e._v(" "),n("b-form-group",{staticStyle:{"margin-bottom":"0rem"}},[n("b-form-checkbox",{attrs:{value:"bold",size:"sm",button:"","button-variant":"outline-primary","unchecked-value":"normal"},model:{value:e.selectedElement.style["font-weight"],callback:function(t){e.$set(e.selectedElement.style,"font-weight",t)},expression:"selectedElement.style['font-weight']"}},[n("font-awesome-icon",{attrs:{icon:["fas","bold"]}})],1),e._v(" "),n("b-form-checkbox",{attrs:{value:"italic",size:"sm",button:"","button-variant":"outline-primary","unchecked-value":"normal"},model:{value:e.selectedElement.style["font-style"],callback:function(t){e.$set(e.selectedElement.style,"font-style",t)},expression:"selectedElement.style['font-style']"}},[n("font-awesome-icon",{attrs:{icon:["fas","italic"]}})],1)],1)],1):e._e(),e._v(" "),e.canEdit&&e.selectedElement&&"image"===e.selectedElement.type?n("div",{staticClass:"auto-width"},[n("b-form-input",{staticClass:"auto-width",attrs:{size:"sm",type:"number",min:10,step:"1"},model:{value:e.selectedElementPositionWH,callback:function(t){e.selectedElementPositionWH=e._n(t)},expression:"selectedElementPositionWH"}})],1):e._e(),e._v(" "),e.canEdit&&e.selectedElement&&e.selectedElement.position?n("div",{staticClass:"auto-width"},[n("label",{staticClass:"mx-1",attrs:{for:"position_x"}},[e._v("X")]),e._v(" "),n("b-form-input",{staticClass:"auto-width",attrs:{size:"sm",id:"position_x",type:"number",min:0,step:"1"},model:{value:e.selectedElement.position.x,callback:function(t){e.$set(e.selectedElement.position,"x",e._n(t))},expression:"selectedElement.position.x"}}),e._v(" "),n("label",{staticClass:"mx-1",attrs:{for:"position_y"}},[e._v("Y")]),e._v(" "),n("b-form-input",{staticClass:"auto-width",attrs:{size:"sm",id:"position_y",type:"number",min:0,step:"1"},model:{value:e.selectedElement.position.y,callback:function(t){e.$set(e.selectedElement.position,"y",e._n(t))},expression:"selectedElement.position.y"}})],1):e._e()],1),e._v(" "),n("div",{directives:[{name:"resize",rawName:"v-resize:resize",value:e.onResize,expression:"onResize",arg:"resize"}],ref:"panel",staticClass:"h-100",style:e.divPanelIdStyle,attrs:{id:"panel"}},[n("panZoom",{ref:"panZoom",attrs:{selector:"#paneZoom",options:{minZoom:.3,bounds:!0}},on:{init:e.onInit}},[n("div",{style:e.panelStyle(e.screen.size),attrs:{id:"paneZoom"}},[n("b-img-lazy",{staticClass:"element",style:e.backgroundStyle,attrs:{src:e.screen.url}}),e._v(" "),e._e(),e._v(" "),e._l(e.screen.elements,(function(t,r){return[e.canEdit&&"text"===t.type?n("span",{directives:[{name:"dragable",rawName:"v-dragable",value:Object.assign({},e.drag,{ele:t}),expression:"{...drag, ele}"}],key:"drag_text_"+r+"_"+t._id,staticClass:"element sub-element",style:e.getTextStyle(t),attrs:{tabindex:"0"},on:{keydown:e.onArrowKeyPressed}},[e._v("\n                                "+e._s(e.getElementValue(t))+"\n                            ")]):e._e(),e._v(" "),e.canEdit&&"image"===t.type?n("img",{directives:[{name:"dragable",rawName:"v-dragable",value:Object.assign({},e.drag,{ele:t}),expression:"{...drag, ele}"}],key:"drag_image_"+r+"_"+t._id,staticClass:"element sub-element",style:e.coordinate(t),attrs:{tabindex:"0",src:e.getElementValue(t)},on:{keydown:e.onArrowKeyPressed}}):e._e(),e._v(" "),e.canEdit||"text"!==t.type?e._e():n("span",{key:"text_"+r+"_"+t._id,ref:"text_"+r+"_"+t._id,refInFor:!0,staticClass:"element sub-click-element",class:[{"sub-click-element-cursor":e.isClickAble(t)}],style:e.getTextStyle(t),attrs:{id:"text_"+r+"_"+t._id}},[e._v("\n                                "+e._s(e.getElementValue(t))+"\n                            ")]),e._v(" "),!e.canEdit&&e.isClickAble(t)&&"text"===t.type?n("b-tooltip",{key:"tooltip_text_"+r+"_"+t._id,attrs:{target:"text_"+r+"_"+t._id,variant:"dark"}},[n("b-button-group",{attrs:{size:"sm"}},[e.hasChart(t)?n("b-button",{attrs:{variant:"dark"},on:{click:function(n){e.openChart(t),e.$root.$emit("bv::hide::tooltip")}}},[e._v("Chart")]):e._e(),e._v(" "),e.hasEdit(t)?n("b-button",{attrs:{variant:"dark"},on:{click:function(n){e.openEdit(t),e.$root.$emit("bv::hide::tooltip")}}},[e._v("Value")]):e._e(),e._v(" "),e.hasCard(t)?n("b-button",{attrs:{variant:"dark"},on:{click:function(n){e.openCard(t),e.$root.$emit("bv::hide::tooltip")}}},[e._v("Card")]):e._e()],1)],1):e._e(),e._v(" "),e.canEdit||"image"!==t.type?e._e():n("b-img-lazy",{key:"image_"+r+"_"+t._id,ref:"image_"+r+"_"+t._id,refInFor:!0,staticClass:"element sub-click-element",class:[{"sub-click-element-cursor":e.isClickAble(t)}],style:e.coordinate(t),attrs:{src:e.getElementValue(t)}}),e._v(" "),!e.canEdit&&e.isClickAble(t)&&"image"===t.type?n("b-tooltip",{key:"tooltip_image_"+r+"_"+t._id,attrs:{target:"image_"+r+"_"+t._id,variant:"dark"}},[n("b-button-group",{attrs:{size:"sm"}},[e.hasChart(t)?n("b-button",{attrs:{variant:"dark"},on:{click:function(n){e.openChart(t),e.$root.$emit("bv::hide::tooltip")}}},[e._v("Chart")]):e._e(),e._v(" "),e.hasEdit(t)?n("b-button",{attrs:{variant:"dark"},on:{click:function(n){e.openEdit(t),e.$root.$emit("bv::hide::tooltip")}}},[e._v("Value")]):e._e(),e._v(" "),e.hasCard(t)?n("b-button",{attrs:{variant:"dark"},on:{click:function(n){e.openCard(t),e.$root.$emit("bv::hide::tooltip")}}},[e._v("Card")]):e._e()],1)],1):e._e()]}))],2)])],1)],1)],1),e._v(" "),n("b-modal",{ref:"modal-end-point-group",attrs:{size:"sm",id:"modal-end-point-group",title:"Select Endpoint","hide-footer":""}},[e.modalItem?n("endpointGroup",{ref:"endpointGroup",attrs:{endPointsData:e.endPointsData},model:{value:e.modalItem.endPointId,callback:function(t){e.$set(e.modalItem,"endPointId",t)},expression:"modalItem.endPointId"}}):e._e(),e._v(" "),n("div",{staticClass:"mt-2 text-right"},[n("b-button",{attrs:{type:"button",size:"sm",variant:"danger"},on:{click:e.onCancelGroupModal}},[e._v("Cancel")]),e._v(" "),n("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:e.onSelect}},[e._v("Select")])],1)],1),e._v(" "),n("b-modal",{ref:"modal-element",attrs:{size:"md",id:"modal-element",title:"Element","hide-footer":""}},[e.modalItem?n("div",{staticClass:"auto-width"},[n("b-form-radio-group",{attrs:{size:"sm",options:[{text:"Text",value:"text"},{text:"Image",value:"image"}],buttons:"","button-variant":"outline-primary"},model:{value:e.modalItem.type,callback:function(t){e.$set(e.modalItem,"type",t)},expression:"modalItem.type"}}),e._v(" "),n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-end-point-group",modifiers:{"modal-end-point-group":!0}}],attrs:{size:"sm",variant:"info"}},[e._v("\n                Choose An Endpoint\n            ")]),e._v(" "),n("b-form-select",{staticClass:"auto-width ",attrs:{size:"sm",options:e.hvacData,"text-field":"key","value-field":"key"},model:{value:e.modalItem.card,callback:function(t){e.$set(e.modalItem,"card",t)},expression:"modalItem.card"}})],1):e._e(),e._v(" "),n("div",[e.modalItem&&e.getEndPointName(e.modalItem.endPointId)?n("div",{staticClass:"text-justify mt-2"},[e._v("\n                    "+e._s(e.getEndPointName(e.modalItem.endPointId))+"\n                "),n("b-button",{staticClass:"py-0 text-danger",attrs:{size:"sm",variant:"link"},on:{click:function(t){return e.$set(e.modalItem,"endPointId","")}}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1)],1):e._e(),e._v(" "),"text"===e.modalItem.type?n("b-form-group",{staticClass:"mt-3",attrs:{label:"Default:","label-size":"sm","label-for":"input-default"}},[n("b-form-input",{attrs:{id:"input-default",size:"sm",type:"text",placeholder:"Default Text When Value is not known"},model:{value:e.modalItem.default,callback:function(t){e.$set(e.modalItem,"default","string"==typeof t?t.trim():t)},expression:"modalItem.default"}})],1):e._e(),e._v(" "),"image"===e.modalItem.type?n("div",{staticClass:"mt-3"},[n("label",{staticClass:"mt-2",attrs:{for:"input-default",size:"sm"}},[e._v("Default:")]),e._v(" "),e.$validURL(e.modalItem.default)?n("a",{attrs:{href:e.modalItem.default,target:"_blank"}},[e._v("Preview")]):e._e(),e._v(" "),e.$validURL(e.modalItem.default)?n("b-button",{staticClass:"py-0 text-danger",attrs:{size:"sm",variant:"link"},on:{click:function(t){return e.removeDefault()}}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1):e._e(),e._v(" "),n("b-form-file",{directives:[{name:"file",rawName:"v-file",value:Object.assign({},e.fileDefault),expression:"{ ...fileDefault, }"}],attrs:{id:"input-default",size:"sm"}})],1):e._e()],1),e._v(" "),"image"===e.modalItem.type&&e.selectedEndPoint?n("div",["enum"===e.selectedEndPoint.type?n("div",e._l(e.selectedEndPoint.enum,(function(t,r){return n("div",{key:"select_enum_"+r,staticClass:"mt-3"},[n("label",{attrs:{for:"input_select_enum_"+r,size:"sm"}},[e._v(e._s(t.name))]),e._v(" "),e.$validURL(e.getCaseValue(t.name))?n("a",{attrs:{href:e.getCaseValue(t.name),target:"_blank"}},[e._v("Preview")]):e._e(),e._v(" "),e.$validURL(e.getCaseValue(t.name))?n("b-button",{staticClass:"py-0 text-danger",attrs:{size:"sm",variant:"link"},on:{click:function(n){return e.removeCase(t)}}},[n("font-awesome-icon",{attrs:{icon:["fas","times"]}})],1):e._e(),e._v(" "),n("b-form-file",{directives:[{name:"file",rawName:"v-file",value:Object.assign({},e.file,{returnAble:t}),expression:"{ ...file, returnAble : _enum }"}],attrs:{id:"input_select_enum_"+r,size:"sm"}})],1)})),0):e._e()]):e._e(),e._v(" "),n("div",{staticClass:"mt-2"},[e.alreadyAttach?n("div",{staticClass:"auto-width float-left"},[n("b-button",{attrs:{type:"button",size:"sm",variant:"info"},on:{click:e.copyElement}},[n("font-awesome-icon",{attrs:{icon:["fas","copy"]}})],1),e._v(" "),n("b-button",{attrs:{type:"button",size:"sm",variant:"danger"},on:{click:e.deleteElement}},[n("font-awesome-icon",{attrs:{icon:["fas","trash-alt"]}})],1)],1):e._e(),e._v(" "),n("div",{staticClass:"auto-width float-right"},[n("b-button",{attrs:{type:"button",size:"sm",variant:"danger"},on:{click:e.hideModalElement}},[e._v("Cancel")]),e._v(" "),n("b-button",{attrs:{type:"button",size:"sm",variant:"primary"},on:{click:e.onSaveElement}},[e._v("Save")])],1)])]),e._v(" "),n("b-modal",{ref:"modal-duplicate-screen",attrs:{id:"modal-duplicate-screen",size:"md",title:"New Screen","hide-footer":""}},[n("b-row",[n("b-col",[n("b-overlay",{attrs:{rounded:"sm"}},[n("b-form",{on:{submit:e.submitScreen}},[n("b-form-group",{attrs:{label:"Screen Title:","label-for":"input-screen-title"}},[n("b-form-input",{attrs:{id:"input-screen-title",type:"text",placeholder:"Enter Screen Title",required:""},model:{value:e.screen.title,callback:function(t){e.$set(e.screen,"title","string"==typeof t?t.trim():t)},expression:"screen.title"}})],1),e._v(" "),n("div",{staticClass:"mt-2 text-right"},[n("b-button",{attrs:{type:"button",size:"sm",variant:"danger"},on:{click:function(t){return e.$bvModal.hide("modal-duplicate-screen")}}},[e._v("Cancel")]),e._v(" "),n("b-button",{attrs:{type:"submit",size:"sm",variant:"primary"}},[e._v("Save")])],1)],1)],1)],1)],1)],1),e._v(" "),n("b-modal",{ref:"modal-endpoint-edit",attrs:{id:"modal-endpoint-edit",size:"sm",title:e.endPointEditItem.displayName,"hide-footer":"","no-close-on-esc":""}},[n("endpointEdit",{attrs:{endPoint:e.endPointEditItem,epStyle:e.getEndpointStyle(e.endPointEditItem),valueWithUnit:e.getEndpointValue(e.endPointEditItem),value:e.getEndpointValue(e.endPointEditItem,!0)},on:{cancel:e.hideEndpointEdit,onUpdate:e.updatedEndpoint}})],1)],1)}),[],!1,null,"2486f43a",null);t.default=component.exports}}]);