(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{368:function(t,e,r){var content=r(385);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(35).default)("34fa4a14",content,!0,{sourceMap:!1})},384:function(t,e,r){"use strict";r(368)},385:function(t,e,r){var o=r(34)(!1);o.push([t.i,".display-contents[data-v-7af182ca] ul{margin-bottom:0}.add[data-v-7af182ca]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}",""]),t.exports=o},400:function(t,e,r){"use strict";r.r(e);r(4),r(3),r(1),r(5),r(2),r(6);var o=r(9),n=r(0),c=(r(31),r(15),r(77),r(10),r(17),r(25));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={mixins:[r(60).a],data:function(){return{selectedCategories:[],categories:["System","Note","Alarm"],searchItem:"",logsData:{limit:20,page:0,total:0},cancelLogToken:null,styleWhenTR:{position:"relative"},styleWhenTD:{position:"absolute",right:"20px",top:"-7px"},eventCates:[],modalItem:{category:"Note",what1:"",what2:null,wrapText:!0},addingItem:{category:"Note",what1:"",what2:null,wrapText:!0},isLoading:!1,writeMode:""}},asyncData:function(t){return{}},computed:{currentPage:{get:function(){return this.logsData.page+1},set:function(t){this.logsData.page=t-1}},isSelectedAll:function(){return this.selectedCategories.length===this.categories.length}},watch:{searchItem:function(){this.getLog()},selectedCategories:function(){this.getLog()},currentPage:function(){this.getLog()}},mounted:function(){this.getLog(),this.getMe.sysAdmin?this.$set(this,"eventCates",["Note","System"]):this.$set(this,"eventCates",["Note"])},methods:d(d({},Object(c.c)([])),{},{toggleAll:function(){this.selectedCategories=this.isSelectedAll?[]:this.categories.slice()},getLog:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o,n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.cancelLogToken&&t.cancelLogToken.cancel(),t.cancelLogToken=t.$cancelToken(),(r=t.$deepClone(t.logsData)).search=t.searchItem,r.category=t.selectedCategories.join(),delete r.rows,delete r.offset,delete r.total,e.next=10,t.$getLogs(r,t.cancelLogToken);case 10:o=e.sent,n=o.status,data=o.data,200===n&&t.$set(t,"logsData",d({},data));case 14:case"end":return e.stop()}}),e)})))()},showModal:function(){this.$refs["modal-crud-logs"].show()},hideModal:function(){this.$refs["modal-crud-logs"].hide()},addNewItem:function(){this.writeMode="Add",this.modalItem=this.addingItem,this.showModal()},writeItem:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,n,c,l,d;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.preventDefault(),e.isLoading=!0,"Add"!==e.writeMode){r.next=18;break}return r.prev=3,r.next=6,e.$addLog(e.modalItem);case 6:o=r.sent,n=o.status,o.data,200===n?(e.getLog(),e.addingItem={category:"Note",what1:"",what2:null,wrapText:!0},e.hideModal()):console.error("Error Add Log"),r.next=18;break;case 12:r.prev=12,r.t0=r.catch(3),c=r.t0.message,l=r.t0.response,d=l?l.data:c,e.$toAst(e,d,"danger");case 18:e.isLoading=!1;case 19:case"end":return r.stop()}}),r,null,[[3,12]])})))()}})},m=(r(384),r(14)),component=Object(m.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-card",{staticClass:"mx-2 full-screen",attrs:{"no-body":""}},[r("h1",{staticClass:"h2 bg-default py-1"},[t._v("Logs")]),t._v(" "),r("b-container",{staticClass:"my-2",attrs:{fluid:""}},[r("div",{staticClass:"d-flex"},[r("b-row",{staticClass:"flex-fill"},[r("b-col",{staticClass:"my-2 my-md-0",attrs:{cols:"12",md:"4"}},[r("b-form-input",{attrs:{size:"sm",placeholder:"Search..."},model:{value:t.searchItem,callback:function(e){t.searchItem="string"==typeof e?e.trim():e},expression:"searchItem"}})],1),t._v(" "),r("b-col",{attrs:{cols:"6",md:"4"}},[r("b-dropdown",{ref:"dropdown-category",attrs:{size:"sm",id:"dropdown-category",text:"Category"}},[r("b-dropdown-form",[r("b-form-checkbox-group",{attrs:{options:t.categories},model:{value:t.selectedCategories,callback:function(e){t.selectedCategories=e},expression:"selectedCategories"}}),t._v(" "),r("b-dropdown-divider"),t._v(" "),r("b-dropdown-item-button",{on:{click:t.toggleAll}},[t._v(t._s(t.isSelectedAll?"Uncheck All":"Check All"))])],1)],1)],1),t._v(" "),r("b-col",{staticClass:"display-contents",attrs:{cols:"6",md:"4"}},[r("b-pagination",{attrs:{align:"fill",size:"sm","total-rows":t.logsData.total,"per-page":t.logsData.limit},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1),t._v(" "),r("b-button",{staticClass:"add ml-2",attrs:{variant:"outline-primary",size:"sm"},on:{click:t.addNewItem}},[t._v("Add")])],1)]),t._v(" "),r("b-table-simple",{staticClass:"h-100 mb-0 d-inline-block sticky-table",attrs:{bordered:"",hover:"",small:"",responsive:"","sticky-header":""}},[r("b-thead",{attrs:{"head-variant":"dark"}},[r("b-tr",[r("b-th",{staticClass:"text-nowrap text-center click-able",attrs:{width:"25%"}},[t._v("When")]),t._v(" "),r("b-th",{staticClass:"text-nowrap text-center click-able",attrs:{width:"15%"}},[t._v("Category")]),t._v(" "),r("b-th",{staticClass:"text-nowrap text-center click-able",attrs:{width:"40%"}},[t._v("What")]),t._v(" "),r("b-th",{staticClass:"text-nowrap text-center click-able",attrs:{width:"20%"}},[t._v("Source")])],1)],1),t._v(" "),r("b-tbody",t._l(t.logsData.rows,(function(e,o){return r("b-tr",{key:o},[r("b-td",{staticClass:"text-nowrap",style:t.styleWhenTR},[t._v("                 \n              "+t._s(t._f("filterDateTime")(e.date))+"\n              "),o>0?r("b-badge",{style:t.styleWhenTD,attrs:{variant:"secondary"}},[t._v(t._s(t.$timediff(t.logsData.rows[o-1].date,e.date)))]):t._e()],1),t._v(" "),r("b-td",{staticClass:"text-center text-nowrap"},[t._v(t._s(e.category))]),t._v(" "),r("b-td",{staticClass:"text-justify"},[e.what1?r("readMoreText",{attrs:{text:e.what1,limit:100}}):t._e(),t._v(" "),e.what2&&!e.wrapText?r("div",[t._v(t._s(e.what2))]):t._e(),t._v(" "),"Alarm"===e.category&&e.reference?r("a",{attrs:{target:"_blank"}},[t._v("Details")]):t._e()],1),t._v(" "),r("b-td",{staticClass:"text-center"},[t._v(t._s(e.source))])],1)})),1)],1)],1),t._v(" "),r("b-modal",{ref:"modal-crud-logs",attrs:{id:"modal-crud-logs",size:"md",title:t.writeMode,"hide-footer":""}},[r("b-row",[r("b-col",[r("b-overlay",{attrs:{show:t.isLoading,rounded:"sm"}},[r("b-form",{on:{submit:t.writeItem}},[r("b-form-group",{attrs:{id:"input-type-category-group",label:"Category:","label-for":"input-type-category"}},[r("b-form-select",{attrs:{id:"input-type-category",options:t.eventCates,placeholder:"Select Category"},model:{value:t.modalItem.category,callback:function(e){t.$set(t.modalItem,"category",e)},expression:"modalItem.category"}})],1),t._v(" "),r("b-form-group",{attrs:{id:"input-note-group",label:"Notes:","label-for":"input-note"}},[r("b-form-textarea",{attrs:{id:"input-notes",placeholder:"Enter Notes",required:""},model:{value:t.modalItem.what1,callback:function(e){t.$set(t.modalItem,"what1",e)},expression:"modalItem.what1"}})],1),t._v(" "),r("b-row",[r("b-col",{staticClass:"text-right"},[r("b-button",{attrs:{type:"button",size:"sm",variant:"danger"},on:{click:t.hideModal}},[t._v("Cancel")]),t._v(" "),r("b-button",{attrs:{type:"submit",size:"sm",variant:"primary"}},[t._v("Save")])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"7af182ca",null);e.default=component.exports}}]);