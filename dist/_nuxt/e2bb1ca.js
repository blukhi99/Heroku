(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{363:function(t,e,n){"use strict";var o=n(9);n(31),n(42),n(91),n(111),n(16);e.a={data:function(){return{endPointsCV:[],intervalCV:null}},mounted:function(){var t=this;this.getCurrentValues(),this.intervalCV=setInterval((function(){t.getCurrentValues()}),3e4)},beforeDestroy:function(){this.intervalCV&&clearInterval(this.intervalCV)},methods:{getEndpointValue:function(t,e){var n=t._id,o=t.precision,r=t.units,c=t.type,l=this.endPointsCV.find((function(t){return t._id===n}));if(null!=l){if(e)return l.value;var d="";switch(c){case"number":var h=l.value?l.value.toFixed(o||0):l.value;null!=h&&(d=h+(r||""));break;case"boolean":d=l.value?"On":"Off";break;case"enum":var f=t.enum.find((function(t){return t.value===l.value}));d=f?f.name:l.value}return d+""}},getEndpointStatus:function(t){var e=this.endPointsCV.find((function(e){return e.name===t.name}));if(null!=e)return e.status},getEndpointStyle:function(t){var e=this.endPointsCV.find((function(e){return e&&t&&e.name===t.name}));if(null!=e)switch(e.status){case"good":return{"background-color":"unset",color:"black"};case"stale":return{"background-color":"lightgrey",color:"black"};case"override":return{"background-color":"rgb(216, 138, 255)",color:"black"};case"down":return{"background-color":"yellow",color:"black"};case"alarm":return{"background-color":"red",color:"white"};case"updating":return{"background-color":"DarkCyan",color:"white"};default:return{"background-color":"unset",color:"gray"}}},getCurrentValues:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$getCurrentValues(t.currentSite);case 3:n=e.sent,o=n.status,data=n.data,200===o&&(t.endPointsCV=data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))()}}}},367:function(t,e,n){var content=n(383);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(35).default)("1094be0f",content,!0,{sourceMap:!1})},382:function(t,e,n){"use strict";n(367)},383:function(t,e,n){var o=n(34)(!1);o.push([t.i,".hidden-endpoint[data-v-63ad0cc4]{filter:opacity(.8)}",""]),t.exports=o},398:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(5),n(6);var o=n(9),r=n(0),c=(n(31),n(1),n(61),n(64),n(13),n(76),n(16),n(91),n(2),n(17),n(25)),l=n(60),d=n(363);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={computed:{filterdEndPointsData:{get:function(){var t=this;return this.endPointsData.filter((function(e){var n=e.displayName,o=e.hidden;return(t.showHidden||!o)&&n.toLowerCase().includes(t.searchEndPoint.toLowerCase())}))},set:function(t){console.log(t)}},endPointsGroup:{get:function(){var t=this;return this.endPointGroupByGroup(this.filterdEndPointsData).map((function(e){return t.isExpand(e)||delete e.item,e}))},set:function(t){console.log("epg",t)}}},mixins:[l.a,d.a],data:function(){return{endPointsData:[],expandedGroup:[],searchEndPoint:"",showHidden:!1,modalItem:{}}},mounted:function(){this.getAllEndPoints()},methods:f(f({},Object(c.c)([])),{},{toggleGroup:function(t){var e=t.group,n=this.expandedGroup.findIndex((function(t){return t.name===e}));n>=0?this.expandedGroup[n].expand=!this.expandedGroup[n].expand:this.expandedGroup.push({name:e,expand:!0})},isExpand:function(t){var e=t.group;return(this.expandedGroup.find((function(t){return t.name===e}))||{}).expand},getAllEndPoints:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$getEndPoints(t.currentSite);case 3:n=e.sent,o=n.status,data=n.data,200===o&&(t.endPointsData=data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))()},showEndpointDetails:function(t){this.modalItem=t,this.$refs["modal-endpoint-details"].show()},showEndpointEdit:function(t){this.modalItem=t,this.$refs["modal-endpoint-edit"].show()},hideEndpointEdit:function(){this.$refs["modal-endpoint-edit"].hide()},updatedEndpoint:function(){this.getCurrentValues(),this.$refs["modal-endpoint-edit"].hide()},showChart:function(t){var e=[];if(this.endPointsData.forEach((function(t){var n=t._id;t.checked&&e.push(n)})),e.length>0)if(t.ctrlKey){var n=this.$router.resolve({path:"/chart-endpoint/",query:{path:e.join("&"),fullScreen:!1}});window.open(n.href,"_blank")}else this.$router.push({path:"/chart-endpoint/",query:{path:e.join("&"),fullScreen:!1}});else this.$toAst(this,"Select Endpoint","primary")},showFullChart:function(t){var e=[];if(this.endPointsData.forEach((function(t){var n=t._id;t.checked&&e.push(n)})),e.length>0){var n=this.$router.resolve({path:"/chart-endpoint/",query:{path:e.join("&"),fullScreen:!0}});window.open(n.href,"","width=500")}else this.$toAst(this,"Select Endpoint","primary")}})},v=(n(382),n(14)),component=Object(v.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticClass:"mx-2 full-screen",attrs:{"no-body":""}},[n("div",{staticClass:"bg-default"},[n("h1",{staticClass:"h2 di-flex"},[n("span",{staticClass:"specialty"},[t._v("End")]),n("span",{staticClass:"dashboard"},[t._v("Points")])])]),t._v(" "),n("b-row",{staticClass:"mx-0 py-2"},[n("b-col",{staticClass:"text-left"},[n("b-form-input",{staticClass:"auto-width",attrs:{size:"sm",placeholder:"Search..."},model:{value:t.searchEndPoint,callback:function(e){t.searchEndPoint="string"==typeof e?e.trim():e},expression:"searchEndPoint"}}),t._v(" "),n("b-button",{attrs:{size:"sm",variant:"link"},on:{click:function(e){t.showHidden=!t.showHidden}}},[t._v(t._s(t.showHidden?"Hide":"Show"))]),t._v(" "),n("b-button",{attrs:{size:"sm",variant:"link"},on:{click:t.showChart}},[n("font-awesome-icon",{attrs:{icon:["fas","chart-line"]}})],1),t._v(" "),n("b-button",{attrs:{size:"sm",variant:"link"},on:{click:t.showFullChart}},[n("font-awesome-icon",{attrs:{icon:["fas","window-maximize"]}})],1)],1)],1),t._v(" "),n("b-table-simple",{staticClass:"h-100 mb-0 d-inline-block sticky-table",attrs:{bordered:"",hover:"",small:"",responsive:"","sticky-header":""}},[n("b-thead",[n("b-tr",[n("b-th",{staticClass:"text-nowrap",attrs:{width:"2%"}},[t._v("#")]),t._v(" "),n("b-th",{staticClass:"text-nowrap",attrs:{width:"50%"}},[t._v("Display Name")]),t._v(" "),n("b-th",{staticClass:"text-nowrap"},[t._v("Status")]),t._v(" "),n("b-th",{staticClass:"text-nowrap"},[t._v("Value")]),t._v(" "),n("b-th",{staticClass:"text-nowrap"},[t._v("Action")])],1)],1),t._v(" "),t._l(t.endPointsGroup,(function(e,o){return n("b-tbody",{key:o},[n("b-tr",[n("b-th",{attrs:{colspan:"5"}},[n("b-button",{staticClass:"font-weight-bold bg-transparent text-left",attrs:{size:"sm",block:"",variant:"light"},on:{click:function(n){return t.toggleGroup(e)}}},[n("font-awesome-icon",{staticClass:"main-handle mr-3",attrs:{icon:["fas",t.isExpand(e)?"minus":"plus"]}}),t._v(t._s(e.group)+"\n            ")],1)],1)],1),t._v(" "),t._l(e.item,(function(e,o){return n("b-tr",{key:o,class:{"hidden-endpoint":e.hidden}},[n("b-td",{staticClass:"text-center align-middle"},[n("b-form-checkbox",{model:{value:e.checked,callback:function(n){t.$set(e,"checked",n)},expression:"item.checked"}})],1),t._v(" "),n("b-td",[t._v(t._s(e.displayName))]),t._v(" "),n("b-td",{staticClass:"text-center",style:t.getEndpointStyle(e)},[t._v(t._s(t.getEndpointStatus(e)))]),t._v(" "),n("b-td",{staticClass:"text-center"},[t._v(t._s(t.getEndpointValue(e)))]),t._v(" "),n("b-td",{staticClass:"text-center"},[n("b-button",{staticClass:"crud-action",attrs:{size:"sm",variant:"outline-primary"},on:{click:function(n){return t.showEndpointDetails(e)}}},[n("font-awesome-icon",{attrs:{icon:["fas","info-circle"]}})],1),t._v(" "),e.writable?n("b-button",{staticClass:"crud-action",attrs:{size:"sm",variant:"outline-info"},on:{click:function(n){return t.showEndpointEdit(e)}}},[n("font-awesome-icon",{attrs:{icon:["fas","pencil-alt"]}})],1):n("b-button",{staticClass:"crud-action",staticStyle:{visibility:"collapse"},attrs:{size:"sm",variant:"outline-info"}},[n("font-awesome-icon",{attrs:{icon:["fas","pencil-alt"]}})],1)],1)],1)}))],2)}))],2)],1),t._v(" "),n("b-modal",{ref:"modal-endpoint-edit",attrs:{id:"modal-endpoint-edit",size:"sm",title:t.modalItem.displayName,"hide-footer":"","no-close-on-esc":""}},[n("endpointEdit",{attrs:{endPoint:t.modalItem,epStyle:t.getEndpointStyle(t.modalItem),valueWithUnit:t.getEndpointValue(t.modalItem),value:t.getEndpointValue(t.modalItem,!0)},on:{cancel:t.hideEndpointEdit,onUpdate:t.updatedEndpoint}})],1),t._v(" "),n("b-modal",{ref:"modal-endpoint-details",attrs:{id:"modal-endpoint-details",size:"sm",title:t.modalItem.displayName,"hide-footer":"","no-close-on-esc":""}},[n("endpointDetails",{attrs:{epStatus:t.getEndpointStatus(t.modalItem),endPoint:t.modalItem,epStyle:t.getEndpointStyle(t.modalItem),valueWithUnit:t.getEndpointValue(t.modalItem)}})],1)],1)}),[],!1,null,"63ad0cc4",null);e.default=component.exports}}]);